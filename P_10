#include <stdio.h>
#include <stdlib.h>

typedef struct Node {
    int data;
    struct Node *next;
} Node;

Node *front = NULL, *rear = NULL;

void enqueue(int x) {
    Node *p = (Node*)malloc(sizeof(Node));
    if (!p) { printf("Memory error\n"); return; }
    p->data = x;
    p->next = NULL;
    if (rear == NULL) {
        front = rear = p;
    } else {
        rear->next = p;
        rear = p;
    }
}

int dequeue() {
    if (front == NULL) {
        printf("Queue Underflow\n");
        return -1;
    }
    Node *t = front;
    int val = t->data;
    front = front->next;
    if (front == NULL) rear = NULL;
    free(t);
    return val;
}

void display() {
    Node *p = front;
    if (!p) { printf("Queue Empty\n"); return; }
    while (p) {
        printf("%d ", p->data);
        p = p->next;
    }
    printf("\n");
}

int main() {
    enqueue(5);
    enqueue(10);
    enqueue(15);
    display();
    printf("Dequeued: %d\n", dequeue());
    display();
    return 0;
}
